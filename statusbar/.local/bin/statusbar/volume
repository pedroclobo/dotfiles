#!/bin/sh
# Status bar volume script

# Buttons
case "$BLOCK_BUTTON" in
	1) volctl mute ;;
	2) "$TERMINAL" -e "$EDITOR" "$0" ;;
	3) "$TERMINAL" -e pulsemixer ;;
	4) volctl +5 ;;
	5) volctl -5 ;;
esac

# Get volume level and mute variable
volume=$(pulsemixer --get-volume | sed 's/\s.*$//')
mute=$(pulsemixer --get-mute)

# Icons and labels
if [ "$mute" = 0 ]; then
	if [ "$volume" = 0 ]; then
		icon=" "
	elif [ "$volume" -gt 0 ] && [ "$volume" -lt 50 ]; then
		icon=" "
	elif [ "$volume" -ge 50 ] && [ "$volume" -lt 75 ]; then
		icon="墳 "
	elif [ "$volume" -ge 75 ]; then
		icon=" "
	fi
elif [ "$mute" = 1 ]; then
	icon="ﱝ "
	label="MUTED"
fi

# Output
[ "$mute" = 0 ] && echo " $icon $volume%" || echo " $icon $label"
